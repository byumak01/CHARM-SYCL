#
# This file is automatically generated by ci/gen.py
#
build_image_ubuntu22.04_llvm13_cuda11.8.0_rocm5.6:
  image:
    name: docker
  script:
  - pwd
  - ls -l
  - docker login -u "${CI_REGISTRY_USER}" -p "${CI_REGISTRY_PASSWORD}" "${CI_REGISTRY}"
  - docker pull "${image}" || true
  - if [[ -z "$(docker image ls -q "${CI_REGISTRY_IMAGE}:llvm13-cuda11.8.0-rocm5.6-a98e0ef2739d1f389e52c8f0168a4ba71cfae9862e71883afed59a4f9260e65d")"
    ]]; then docker buildx build --build-arg 'LLVM=13' --build-arg 'BASE_IMAGE=nvidia/cuda'
    --build-arg 'BASE_TAG=11.8.0-devel-ubuntu22.04' --build-arg 'ROCM=5.6' --build-arg
    'UID=1000' --build-arg 'RENDER_GID=109' -t "${image}" - < "${CI_PROJECT_DIR}/ci/Dockerfile"
    && docker push "${CI_REGISTRY_IMAGE}:llvm13-cuda11.8.0-rocm5.6-a98e0ef2739d1f389e52c8f0168a4ba71cfae9862e71883afed59a4f9260e65d"
    || exit 1; fi
  stage: build_images
  tags:
  - docker
  variables:
    image: ${CI_REGISTRY_IMAGE}:llvm13-cuda11.8.0-rocm5.6-a98e0ef2739d1f389e52c8f0168a4ba71cfae9862e71883afed59a4f9260e65d
build_image_ubuntu22.04_llvm14_cuda11.8.0_rocm5.6:
  image:
    name: docker
  script:
  - pwd
  - ls -l
  - docker login -u "${CI_REGISTRY_USER}" -p "${CI_REGISTRY_PASSWORD}" "${CI_REGISTRY}"
  - docker pull "${image}" || true
  - if [[ -z "$(docker image ls -q "${CI_REGISTRY_IMAGE}:llvm14-cuda11.8.0-rocm5.6-806c231a23edfc5f87bab561fc5a098a1038c1e6b5e00b506df56721e25e9f7e")"
    ]]; then docker buildx build --build-arg 'LLVM=14' --build-arg 'BASE_IMAGE=nvidia/cuda'
    --build-arg 'BASE_TAG=11.8.0-devel-ubuntu22.04' --build-arg 'ROCM=5.6' --build-arg
    'UID=1000' --build-arg 'RENDER_GID=109' -t "${image}" - < "${CI_PROJECT_DIR}/ci/Dockerfile"
    && docker push "${CI_REGISTRY_IMAGE}:llvm14-cuda11.8.0-rocm5.6-806c231a23edfc5f87bab561fc5a098a1038c1e6b5e00b506df56721e25e9f7e"
    || exit 1; fi
  stage: build_images
  tags:
  - docker
  variables:
    image: ${CI_REGISTRY_IMAGE}:llvm14-cuda11.8.0-rocm5.6-806c231a23edfc5f87bab561fc5a098a1038c1e6b5e00b506df56721e25e9f7e
build_image_ubuntu22.04_llvm15_cuda12.1.1_rocm5.6:
  image:
    name: docker
  script:
  - pwd
  - ls -l
  - docker login -u "${CI_REGISTRY_USER}" -p "${CI_REGISTRY_PASSWORD}" "${CI_REGISTRY}"
  - docker pull "${image}" || true
  - if [[ -z "$(docker image ls -q "${CI_REGISTRY_IMAGE}:llvm15-cuda12.1.1-rocm5.6-d62b8df21fd9d5cd783a487e78ed4d5a55aac916a8b384145859d93eb1c3979c")"
    ]]; then docker buildx build --build-arg 'LLVM=15' --build-arg 'BASE_IMAGE=nvidia/cuda'
    --build-arg 'BASE_TAG=12.1.1-devel-ubuntu22.04' --build-arg 'ROCM=5.6' --build-arg
    'UID=1000' --build-arg 'RENDER_GID=109' -t "${image}" - < "${CI_PROJECT_DIR}/ci/Dockerfile"
    && docker push "${CI_REGISTRY_IMAGE}:llvm15-cuda12.1.1-rocm5.6-d62b8df21fd9d5cd783a487e78ed4d5a55aac916a8b384145859d93eb1c3979c"
    || exit 1; fi
  stage: build_images
  tags:
  - docker
  variables:
    image: ${CI_REGISTRY_IMAGE}:llvm15-cuda12.1.1-rocm5.6-d62b8df21fd9d5cd783a487e78ed4d5a55aac916a8b384145859d93eb1c3979c
stages:
- build_images
- tests
test_Debug_ubuntu22.04_llvm13_cuda11.8.0_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm13-cuda11.8.0-rocm5.6-a98e0ef2739d1f389e52c8f0168a4ba71cfae9862e71883afed59a4f9260e65d
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Debug
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
test_Debug_ubuntu22.04_llvm14_cuda11.8.0_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm14-cuda11.8.0-rocm5.6-806c231a23edfc5f87bab561fc5a098a1038c1e6b5e00b506df56721e25e9f7e
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Debug
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
test_Debug_ubuntu22.04_llvm15_cuda12.1.1_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm15-cuda12.1.1-rocm5.6-d62b8df21fd9d5cd783a487e78ed4d5a55aac916a8b384145859d93eb1c3979c
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Debug
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
test_Release_ubuntu22.04_llvm13_cuda11.8.0_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm13-cuda11.8.0-rocm5.6-a98e0ef2739d1f389e52c8f0168a4ba71cfae9862e71883afed59a4f9260e65d
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Release
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
test_Release_ubuntu22.04_llvm14_cuda11.8.0_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm14-cuda11.8.0-rocm5.6-806c231a23edfc5f87bab561fc5a098a1038c1e6b5e00b506df56721e25e9f7e
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Release
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
test_Release_ubuntu22.04_llvm15_cuda12.1.1_rocm5.6_iris-b6169816:
  before_script:
  - git config --global http.sslCAInfo "${CI_SERVER_TLS_CA_FILE}"
  - git clone "${CI_SERVER_PROTOCOL}://gitlab-ci-token:${CI_JOB_TOKEN}@${CI_SERVER_HOST}:${CI_SERVER_PORT}/${CI_PROJECT_NAMESPACE}/iris.git"
    iris_src
  - cd iris_src
  - git clean -ffdx
  - git fetch origin
  - git checkout b616981626b5a4f9df904131ef00f637d3dd984f
  - git log -1
  - cmake -S "${CI_PROJECT_DIR}/iris_src" -B "${CI_PROJECT_DIR}/iris_build" "-DCMAKE_INSTALL_PREFIX=${CI_PROJECT_DIR}/iris"
    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}" -DBUILD_SHARED_LIBS=NO -DTRACE_DISABLE=${TRACE_DISABLE}
    -DDEBUG_DISABLE=${DEBUG_DISABLE}
  - cmake --build "${CI_PROJECT_DIR}/iris_build" -j 4
  - cmake --install "${CI_PROJECT_DIR}/iris_build"
  image:
    name: ${CI_REGISTRY_IMAGE}:llvm15-cuda12.1.1-rocm5.6-d62b8df21fd9d5cd783a487e78ed4d5a55aac916a8b384145859d93eb1c3979c
  script:
  - '"${CI_PROJECT_DIR}/ci/test.sh"'
  stage: tests
  tags:
  - docker
  - cuda
  variables:
    CHARM_SYCL_CUDA_IS_REQUIRED: 'YES'
    CHARM_SYCL_HIP_IS_REQUIRED: 'YES'
    CMAKE_BUILD_TYPE: Release
    DEBUG_DISABLE: 'ON'
    GIT_SUBMODULE_STRATEGY: normal
    IRIS_DIR: ${CI_PROJECT_DIR}/iris
    TRACE_DISABLE: 'ON'
    USE_IRIS: 'YES'
variables:
  CACHE_COMPRESSION_LEVEL: fast
  FF_USE_FASTZIP: 'true'
